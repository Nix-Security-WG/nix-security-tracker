{% extends "base.html" %}

{% block content %}
<div id="suggestion-list">
  {% for object in object_list %}
    <article class="suggestion">
      <a class="cve-id" href="https://nvd.nist.gov/vuln/detail/{{ object.cve.cve_id | urlencode }}">
        {{ object.cve.cve_id }}
      </a>
      <div class="row1">
        <h2 class="affected_package">{{ object.package_name }}</h2>
        <div class="severity">{{ object.base_severity__display }}</div>
      </div>
      {{ object.title }}<br>
      <!-- TODO Build a Show more button -->
      {{ object.description|truncatewords:10 }}
      {% for attribute, nixos_channels in object.packages.items %}
        <article class="nixpkgs-package">
          <h3>pkgs.{{ attribute }}</h3>
          <table>
            {% for nixos_channel, version in nixos_channels.items %}
              <tr>
                <td>{{ nixos_channel }}</td>
                <td>: {{ version }}</td>
              </tr>
            {% endfor %}
          </table>
        </article>
      {% endfor %}
    </article>
  {% endfor %}
</div>
{% endblock content %}

